<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>URL Shortener Test</title>
</head>
<body style="font-family: Arial; padding: 30px">

<h2>ðŸ”— URL Shortener Test</h2>

<input type="text" id="url" placeholder="https://example.com" style="width: 300px">
<button onclick="shorten()">Shorten</button>

<p id="result"></p>

<script>
const BASE_URL = "https://url-shortner-93v4.onrender.com";

async function shorten() {
    const url = document.getElementById("url").value;
    const result = document.getElementById("result");

    if (!url) {
        result.innerText = "Please enter a URL";
        return;
    }

    try {
        const response = await fetch(
            `${BASE_URL}/api/url/shorten?originalUrl=${encodeURIComponent(url)}`,
            { method: "POST" }
        );

        if (!response.ok) {
            result.innerText = "Error while shortening URL";
            return;
        }

        const data = await response.json();

        const redirectUrl = `${BASE_URL}/redirect/${data.shortUrl}`;

        result.innerHTML = `
            âœ… Short URL Created<br><br>
            <a href="${redirectUrl}" target="_blank">${redirectUrl}</a>
        `;
    } catch (e) {
        result.innerText = "Network error. Backend not reachable.";
    }
}
</script>

</body>
</html>
